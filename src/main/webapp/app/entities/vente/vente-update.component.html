<div class="row justify-content-center">
        <div class="col-md-12">
            <nb-card>
                <nb-card-header>
                    <h2>
                        <span *jhiHasAnyAuthority="['CONCESSIONNAIRE','REVENDEUR']"> Vente </span>
                        <span *jhiHasAnyAuthority="['STHGUICHET']">Enregistrement d'importateurs occasionnels</span>
                        <button nbButton outline shape="round" status="primary"
                                class="float-right"  (click)="newMarks()">
                            <fa-icon icon="plus"></fa-icon>
                            <span>
                           Importer de nouvelles marques
                        </span>
                        </button>
                    </h2>
                </nb-card-header>
                <nb-card-body>
                    <nb-card *jhiHasAnyAuthority="['CONCESSIONNAIRE','REVENDEUR']">
                        <nb-card-header>
                            <div class="form-group row">
                                <div class="col-sm-10">
                                    <nb-checkbox [value]="checkedHStock" (checkedChange)="toggle2($event)"
                                                 status="primary"  size="10"> Pas dans le Stock </nb-checkbox>
                                </div>
                                <div class="col-sm-2">
                                    <nb-checkbox [value]="checkedStock" (checkedChange)="toggle($event)"
                                                 status="primary" size="10"> Dans le Stock </nb-checkbox>
                                </div>
                            </div>
                        </nb-card-header>
                    </nb-card>
                    <nb-card>
                        <div *ngIf="checkedHStock">
                            <nb-tabset fullWidth>
                                <nb-tab tabTitle="A Personne physique">
                                    <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
                                        <nb-card>
                                            <nb-card-body>
                                                <nb-stepper orientation="horizontal">
                                                    <nb-step>
                                                        <div class="form-group" [hidden]="!editForm.get('id').value">
                                                            <label >ID</label>
                                                            <input type="text" class="form-control" name="id" formControlName="id"
                                                                   readonly />
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label"> Numéro de Chassis </label>
                                                            <div class="col-sm-8">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                       type="text" placeholder="Numéro de Chassis"
                                                                       formControlName="numeroChassis"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-11 col-form-label" ></label>
                                                            <button nbButton nbStepperNext outline shape="round" status="primary" (click)="verifChassis()">
                                                                <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                            </button>
                                                        </div>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div *ngIf="vexist; else pasVexist">
                                                            <div>
                                                                <p style="background: #db8b00">Ce numero Cahssis existe! Voici les details en déssous;
                                                                    reculez pour verifier le numero Chassis.</p>
                                                                <div class="container">
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero Chassis :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist.body.numeroChassis}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Etat :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            <div *ngIf="vehiexist.body.venteId; else novendu">
                                                                                Vendu
                                                                            </div>
                                                                            <ng-template #novendu>
                                                                                Pas Vendu
                                                                            </ng-template>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Couleur :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist.body.couleur}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Model :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist.body.model}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Energie :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist.body.energie}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Genre :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist.body.types}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <button nbButton nbStepperPrevious (click)="vidChassis()" outline shape="round" status="basic">
                                                                    <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <ng-template #pasVexist>
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label">Selectionner le Type</label>
                                                                        <div class="col-sm-8">
                                                                            <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="typeVehiculeId">
                                                                                <nb-option [value]="typevehiculesOption.id" *ngFor="let typevehiculesOption of typevehicules;  trackBy: trackById">
                                                                                    Type  => {{typevehiculesOption.libelle}}
                                                                                </nb-option>
                                                                            </nb-select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label">Marque Engin</label>
                                                                        <div class="col-sm-8">
                                                                            <nb-form-field>
                                                                                <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
                                                                                <input [nbAutocomplete]="auto" type="text" fieldSize="tiny" formControlName="marqueVehiculeId" required
                                                                                       #autoInput (input)="onChange()" (click)="clic()" nbInput status="primary" fullWidth placeholder="Rechercher une marque"/>
                                                                            </nb-form-field>
                                                                            <nb-autocomplete #auto [handleDisplayFn]="viewHandle" (selectedChange)="onSelectionChange($event)">
                                                                                <nb-option  *ngFor="let option of filteredOptions$ | async" [value]="option.libelle">
                                                                                    {{ option.libelle }}
                                                                                </nb-option>
                                                                            </nb-autocomplete>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label">Genre/Regime du vehicule</label>
                                                                        <div class="col-sm-8">
                                                                            <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="genre">
                                                                                <nb-option [value]="genreOption" *ngFor="let genreOption of genre;  trackBy: trackById">
                                                                                    {{genreOption}}
                                                                                </nb-option>
                                                                            </nb-select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label">Carrosserie du vehicule</label>
                                                                        <div class="col-sm-8">
                                                                            <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="carrosserie">
                                                                                <nb-option [value]="carrosserieOption" *ngFor="let carrosserieOption of carrosserie;  trackBy: trackById">
                                                                                    {{carrosserieOption}}
                                                                                </nb-option>
                                                                            </nb-select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Montant Engin </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="number" placeholder="Prix de l'Engin"
                                                                                   formControlName="montant"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Modèle </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="text" placeholder="Modèle"
                                                                                   formControlName="model"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Energie </label>
                                                                        <div class="col-sm-8">
                                                                            <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="energie">
                                                                                <nb-option [value]="energieOption" *ngFor="let energieOption of energies;  trackBy: trackById">
                                                                                    {{energieOption}}
                                                                                </nb-option>
                                                                            </nb-select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Nombre de Place </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="number" placeholder="Nombre de Place"
                                                                                   formControlName="place"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Poids à vide </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="number" placeholder="Poids à vide"
                                                                                   formControlName="poids"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Charge Utile </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="number" placeholder="Charge Utile"
                                                                                   formControlName="chargeUtile"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-10 col-form-label" ></label>
                                                                <button nbButton nbStepperNext outline shape="round" status="primary">
                                                                    <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                                </button>
                                                            </div>
                                                        </ng-template>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-3 col-form-label"> NIP/No Identifiant </label>
                                                                <div class="col-sm-9">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                           type="text" placeholder="NIP/No Identifiant" required
                                                                           formControlName="nip" minlength="8" maxlength="14"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <button nbButton nbStepperPrevious (click)="vidmarq()" outline shape="round" status="basic">
                                                            <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                        </button>
                                                        <button nbButton nbStepperNext outline shape="round" status="primary" (click)="verifNip()">
                                                            <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                        </button>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div *ngIf="exist; else pasHstNip">
                                                            <div>
                                                                <p style="background: #db8b00">Ce numero NIP existe! Voici les details en déssous, s'il s'agit du même document continuez;
                                                                    dans le cas contraire reculer pour rectifier le NIP.</p>
                                                                <div class="container">
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero NIP :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.nip}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero Document :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.numeroDoc}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Type Document :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.typeDocIdentification}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Date établissement :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.dateEtablissement}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Authorité émettrice :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.autoriteEmettrice}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Lieu établissement :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.lieuEtablissement}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <ng-template #pasHstNip>
                                                            <div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Nom </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Nom" required
                                                                               formControlName="nom"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Prenom </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Prenom" required
                                                                               formControlName="prenom"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Date Naissance </label>
                                                                    <div class="col-sm-9">
                                                            <span class="input-group-append">
                                                                <input nbInput fullWidth shape="round" fieldSize="small" placeholder="Date Naissance" type="text" class="inputText" name="dateNaissance"
                                                                       ngbDatepicker  #dateNaissanceDp="ngbDatepicker" formControlName="dateNaissance"/>
                                                                <button type="button" class="btn btn-secondary" (click)="dateNaissanceDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                            </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Lieu Naissance </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Lieu Naissance" required
                                                                               formControlName="lieuNaissance"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Telephone </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Telephone" required
                                                                               formControlName="telephone"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Residence </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Residence" required
                                                                               formControlName="residence"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label" >Type Doc Identification</label>
                                                                    <div class="col-sm-9">
                                                                        <nb-select status="primary" shape="round" fullWidth outline size="small" formControlName="typeDocIdentification">
                                                                            <nb-option value="CNIB">{{'improApp.TypeDocIdentification.CNIB' | translate}}</nb-option>
                                                                            <nb-option value="PASSEPORT">{{'improApp.TypeDocIdentification.PASSEPORT' | translate}}</nb-option>
                                                                            <nb-option value="CARTE_MILITAIRE">{{'improApp.TypeDocIdentification.CARTE_MILITAIRE' | translate}}</nb-option>
                                                                            <nb-option value="CARTE_SCOLAIRE">{{'improApp.TypeDocIdentification.CARTE_SCOLAIRE' | translate}}</nb-option>
                                                                            <nb-option value="CARTE_ID_ETRANGERE">{{'improApp.TypeDocIdentification.CARTE_ID_ETRANGERE' | translate}}</nb-option>
                                                                        </nb-select>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label  class="col-sm-3 col-form-label">Pays</label>
                                                                    <div class="col-sm-9">
                                                                        <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="nation">
                                                                            <nb-option [value]="nation" *ngFor="let nation of listnation;  trackBy: trackById">
                                                                                {{nation.name}} --- Code => {{nation.phonecode}}
                                                                            </nb-option>
                                                                        </nb-select>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Numero Document </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Numero Document" required
                                                                               formControlName="numeroDoc"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Date Etablissement </label>
                                                                    <div class="col-sm-9">
                                                            <span class="input-group-append">
                                                                <input nbInput fullWidth shape="round" status="primary"
                                                                       placeholder="Date Etablissement" type="text" class="inputText" name="dateEtablissement"
                                                                       ngbDatepicker  #dateEtablissementDp="ngbDatepicker" formControlName="dateEtablissement"/>
                                                                <button type="button" class="btn btn-secondary" (click)="dateEtablissementDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                            </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Lieu Etablissement </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Lieu Etablissement" required
                                                                               formControlName="lieuEtablissement"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Autorite Emettrice </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Autorite Emettrice" required
                                                                               formControlName="autoriteEmettrice"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <button nbButton nbStepperPrevious (click)="vidmarq();videNip()" outline shape="round" status="basic">
                                                            <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                        </button>
                                                    </nb-step>
                                                </nb-stepper>
                                            </nb-card-body>
                                            <nb-card-footer>
                                                <button type="button" id="cancel-save11" (click)="previousState()"
                                                        nbButton status="basic" outline shape="round" >
                                                    <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span >Annuler</span>
                                                </button>
                                                <button type="submit" id="save-entity" [disabled]="isSaving"
                                                        nbButton status="primary" outline shape="round" >
                                                    <fa-icon [icon]="'save'"></fa-icon>&nbsp;<span>Enregistrer</span>
                                                </button>
                                            </nb-card-footer>
                                        </nb-card>
                                    </form>
                                </nb-tab>
                                <nb-tab tabTitle="A Personne morale">
                                    <form name="editForm1" role="form" novalidate (ngSubmit)="save1()" [formGroup]="editForm1">
                                        <nb-card>
                                            <nb-card-body>
                                                <nb-stepper orientation="horizontal">
                                                    <nb-step>
                                                        <div class="form-group" [hidden]="!editForm1.get('id').value">
                                                            <label >ID</label>
                                                            <input type="text" class="form-control" name="id" formControlName="id"
                                                                   readonly />
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label"> Numéro de Chassis </label>
                                                            <div class="col-sm-8">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                       type="text" placeholder="Numéro de Chassis"
                                                                       formControlName="numeroChassis"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-11 col-form-label" ></label>
                                                            <button nbButton nbStepperNext outline shape="round" status="primary" (click)="verifChassis1()">
                                                                <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                            </button>
                                                        </div>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div *ngIf="vexist1; else pasVexist1">
                                                            <div>
                                                                <p style="background: #db8b00">Ce numero Cahssis existe! Voici les details en déssous;
                                                                    reculez pour verifier le numero Chassis.</p>
                                                                <div class="container">
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero Chassis :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist1.body.numeroChassis}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Etat :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            <div *ngIf="vehiexist1.body.venteId; else novendu1">
                                                                                Vendu
                                                                            </div>
                                                                            <ng-template #novendu1>
                                                                                Pas Vendu
                                                                            </ng-template>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Couleur :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist1.body.couleur}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Model :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist1.body.model}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Energie :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist1.body.energie}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Genre :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{vehiexist1.body.types}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <button nbButton nbStepperPrevious (click)="vidChassis1()" outline shape="round" status="basic">
                                                                    <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <ng-template #pasVexist1>
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label">Selectionner le Type</label>
                                                                        <div class="col-sm-8">
                                                                            <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="typeVehiculeId">
                                                                                <nb-option [value]="typevehiculesOption.id" *ngFor="let typevehiculesOption of typevehicules;  trackBy: trackById">
                                                                                    Type  => {{typevehiculesOption.libelle}}
                                                                                </nb-option>
                                                                            </nb-select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label">Marque Engin</label>
                                                                        <div class="col-sm-8">
                                                                            <nb-form-field>
                                                                                <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
                                                                                <input [nbAutocomplete]="auto" type="text" fieldSize="tiny" formControlName="marqueVehiculeId" required
                                                                                       #autoInput (input)="onChange()" (click)="clic1()" nbInput status="primary" fullWidth placeholder="Rechercher une marque"/>
                                                                            </nb-form-field>
                                                                            <nb-autocomplete #auto [handleDisplayFn]="viewHandle" (selectedChange)="onSelectionChange1($event)">
                                                                                <nb-option  *ngFor="let option of filteredOptions$ | async" [value]="option.libelle">
                                                                                    {{ option.libelle }}
                                                                                </nb-option>
                                                                            </nb-autocomplete>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label">Genre/Regime du vehicule</label>
                                                                        <div class="col-sm-8">
                                                                            <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="genre">
                                                                                <nb-option [value]="genreOption" *ngFor="let genreOption of genre;  trackBy: trackById">
                                                                                    {{genreOption}}
                                                                                </nb-option>
                                                                            </nb-select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label">Carrosserie du vehicule</label>
                                                                        <div class="col-sm-8">
                                                                            <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="carrosserie">
                                                                                <nb-option [value]="carrosserieOption" *ngFor="let carrosserieOption of carrosserie;  trackBy: trackById">
                                                                                    {{carrosserieOption}}
                                                                                </nb-option>
                                                                            </nb-select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Montant Engin </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="number" placeholder="Prix de l'Engin"
                                                                                   formControlName="montant"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Modèle </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="text" placeholder="Modèle"
                                                                                   formControlName="model"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Energie </label>
                                                                        <div class="col-sm-8">
                                                                            <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="energie">
                                                                                <nb-option [value]="energieOption" *ngFor="let energieOption of energies;  trackBy: trackById">
                                                                                    {{energieOption}}
                                                                                </nb-option>
                                                                            </nb-select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Nombre de Place </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="number" placeholder="Nombre de Place"
                                                                                   formControlName="place"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Poids à vide </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="number" placeholder="Poids à vide"
                                                                                   formControlName="poids"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <label class="col-sm-4 col-form-label"> Charge Utile </label>
                                                                        <div class="col-sm-8">
                                                                            <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                                   type="number" placeholder="Charge Utile"
                                                                                   formControlName="chargeUtile"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-10 col-form-label" ></label>
                                                                <button nbButton nbStepperNext outline shape="round" status="primary">
                                                                    <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                                </button>
                                                            </div>
                                                        </ng-template>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label"> Numéro IFU </label>
                                                            <div class="col-sm-8">
                                                                <input name="numeroIFU" nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                       type="text" placeholder="Numéro IFU"
                                                                       formControlName="numeroIFU"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <button nbButton nbStepperPrevious (click)="vidmarq()" outline shape="round" status="basic">
                                                                <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                            </button>
                                                            <label class="col-sm-10 col-form-label" ></label>
                                                            <button nbButton nbStepperNext outline shape="round" (click)="verifIFU()" status="primary">
                                                                <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                            </button>
                                                        </div>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div *ngIf="exist1; else pasHstIfu">
                                                            <div>
                                                                <p style="background: #db8b00">Ce numero NIP existe! Voici les details en déssous, s'il s'agit du même document continuez;
                                                                    dans le cas contraire reculer pour rectifier le NIP.</p>
                                                                <div class="container">
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero IFU :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.numeroIFU}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero RCCM :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.numeroRCCM}}
                                                                        </div>
                                                                    </div>
                                                                    <!--<div class="row">
                                                                        <div class="col-sm">
                                                                            Dénomination :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body}}
                                                                        </div>
                                                                    </div>-->
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Siege Social :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.siegeSocial}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Phone :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.telephone}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Email:
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.email}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Code Postal :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.codePostal}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <ng-template #pasHstIfu>
                                                            <div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-4 col-form-label">Denomination</label>
                                                                    <div class="col-sm-8">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                               type="text" placeholder="Denomination"
                                                                               formControlName="denomination"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label  class="col-sm-4 col-form-label">Pays</label>
                                                                    <div class="col-sm-8">
                                                                        <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="nation">
                                                                            <nb-option [value]="nation" *ngFor="let nation of listnation;  trackBy: trackById">
                                                                                {{nation.name}} --- Code => {{nation.phonecode}}
                                                                            </nb-option>
                                                                        </nb-select>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-4 col-form-label">Date Création</label>
                                                                    <div class="col-sm-8">
                                                                    <span class="input-group-append">
                                                                        <input nbInput fullWidth shape="round" fieldSize="small" placeholder="Date Creation" type="text" class="inputText"
                                                                               ngbDatepicker  #dateNaissanceDp="ngbDatepicker" formControlName="dateCreate"/>
                                                                        <button type="button" class="btn btn-secondary" (click)="dateNaissanceDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                                    </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-4 col-form-label">Numéro RCCM</label>
                                                                    <div class="col-sm-8">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                               type="text" placeholder="Numero RCCM"
                                                                               formControlName="numeroRCCM" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <button nbButton nbStepperPrevious (click)="vidmarq();videIFU()" outline shape="round" status="basic">
                                                            <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                        </button>
                                                    </nb-step>
                                                </nb-stepper>
                                            </nb-card-body>
                                            <nb-card-footer>
                                                <button type="button" (click)="previousState()"
                                                        nbButton status="basic" outline shape="round" >
                                                    <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span >Annuler</span>
                                                </button>
                                                <button type="submit" [disabled]="isSaving"
                                                        nbButton status="primary" outline shape="round" >
                                                    <fa-icon [icon]="'save'"></fa-icon>&nbsp;<span>Enregistrer</span>
                                                </button>
                                            </nb-card-footer>
                                        </nb-card>
                                    </form>
                                </nb-tab>
                            </nb-tabset>
                        </div>
                        <div *ngIf="checkedStock">
                            <nb-tabset fullWidth>
                                <nb-tab tabTitle="A Personne physique">
                                    <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
                                        <nb-card>
                                            <nb-card-body>
                                                <nb-stepper orientation="horizontal">
                                                    <nb-step>
                                                        <div>
                                                            <jhi-alert-error></jhi-alert-error>
                                                            <div class="form-group" [hidden]="!editForm.get('id').value">
                                                                <label>ID</label>
                                                                <input type="text" class="form-control" name="id" formControlName="id"
                                                                       readonly />
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Marque Engin</label>
                                                                <div class="col-sm-8">
                                                                    <nb-form-field>
                                                                        <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
                                                                        <input [nbAutocomplete]="auto" type="text" fieldSize="tiny" formControlName="marqueVehiculeId" required
                                                                               #autoInput (input)="onChange()" (click)="clic()" nbInput status="primary" fullWidth placeholder="Rechercher une marque"/>
                                                                    </nb-form-field>
                                                                    <nb-autocomplete #auto [handleDisplayFn]="viewHandle" (selectedChange)="onSelectionChange($event)">
                                                                        <nb-option  *ngFor="let option of filteredOptions$ | async" [value]="option.libelle">
                                                                            {{ option.libelle }}
                                                                        </nb-option>
                                                                    </nb-autocomplete>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <button nbButton nbStepperNext status="primary" shape="round" (click)="getmarque()" >Suivant</button>
                                                        </div>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label">Selectionner le vehicule</label>
                                                            <div class="col-sm-8">
                                                                <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="vehiculeStock">
                                                                    <nb-option [value]="vehiculesOption" *ngFor="let vehiculesOption of vehicule; trackBy: trackById">
                                                                        N Chassis: {{vehiculesOption.numeroChassis}} ---Model: {{vehiculesOption.model}}. ---Couleur: {{vehiculesOption.couleur}}
                                                                    </nb-option>
                                                                </nb-select>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <br>
                                                            <button nbButton nbStepperPrevious status="primary" (click)="vidmarq()" shape="round">PRECEDANT</button>
                                                            <button nbButton nbStepperNext status="primary" shape="round">Suivant</button>
                                                        </div>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-3 col-form-label"> NIP/No Identifiant </label>
                                                                <div class="col-sm-9">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                           type="text" placeholder="NIP/No Identifiant" required
                                                                           formControlName="nip" minlength="8" maxlength="14"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <button nbButton nbStepperPrevious (click)="vidmarq()" outline shape="round" status="basic">
                                                            <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                        </button>
                                                        <button nbButton nbStepperNext outline shape="round" status="primary" (click)="verifNip()">
                                                            <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                        </button>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div *ngIf="exist; else pasStNip">
                                                            <div>
                                                                <p style="background: #db8b00">Ce numero NIP existe! Voici les details en déssous, s'il s'agit du même document continuez;
                                                                    dans le cas contraire reculer pour rectifier le NIP.</p>
                                                                <div class="container">
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero NIP :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.nip}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero Document :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.numeroDoc}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Type Document :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.typeDocIdentification}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Date établissement :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.dateEtablissement}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Authorité émettrice :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.autoriteEmettrice}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Lieu établissement :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist.body.lieuEtablissement}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <ng-template #pasStNip>
                                                            <div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Nom </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Nom" required
                                                                               formControlName="nom"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Prenom </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Prenom" required
                                                                               formControlName="prenom"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Date Naissance </label>
                                                                    <div class="col-sm-9">
                                                                    <span class="input-group-append">
                                                                        <input nbInput fullWidth shape="round" fieldSize="small" placeholder="Date Naissance" type="text" class="inputText" name="dateNaissance"
                                                                               ngbDatepicker  #dateNaissanceDp="ngbDatepicker" formControlName="dateNaissance"/>
                                                                        <button type="button" class="btn btn-secondary" (click)="dateNaissanceDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                                    </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Lieu Naissance </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Lieu Naissance" required
                                                                               formControlName="lieuNaissance"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Telephone </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Telephone" required
                                                                               formControlName="telephone"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Residence </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Residence" required
                                                                               formControlName="residence"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label" >Type Doc Identification</label>
                                                                    <div class="col-sm-9">
                                                                        <nb-select status="primary" shape="round" fullWidth outline size="small" formControlName="typeDocIdentification">
                                                                            <nb-option value="CNIB">{{'improApp.TypeDocIdentification.CNIB' | translate}}</nb-option>
                                                                            <nb-option value="PASSEPORT">{{'improApp.TypeDocIdentification.PASSEPORT' | translate}}</nb-option>
                                                                            <nb-option value="CARTE_MILITAIRE">{{'improApp.TypeDocIdentification.CARTE_MILITAIRE' | translate}}</nb-option>
                                                                            <nb-option value="CARTE_SCOLAIRE">{{'improApp.TypeDocIdentification.CARTE_SCOLAIRE' | translate}}</nb-option>
                                                                            <nb-option value="CARTE_ID_ETRANGERE">{{'improApp.TypeDocIdentification.CARTE_ID_ETRANGERE' | translate}}</nb-option>
                                                                        </nb-select>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label  class="col-sm-3 col-form-label">Pays</label>
                                                                    <div class="col-sm-9">
                                                                        <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="nation">
                                                                            <nb-option [value]="nation" *ngFor="let nation of listnation;  trackBy: trackById">
                                                                                {{nation.name}} --- Code => {{nation.phonecode}}
                                                                            </nb-option>
                                                                        </nb-select>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Numero Document </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Numero Document" required
                                                                               formControlName="numeroDoc"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Date Etablissement </label>
                                                                    <div class="col-sm-9">
                                                                        <span class="input-group-append">
                                                                            <input nbInput fullWidth shape="round" status="primary" id="field_dateEtablissement"
                                                                                   placeholder="Date Etablissement" type="text" class="inputText" name="dateEtablissement"
                                                                                   ngbDatepicker  #dateEtablissementDp="ngbDatepicker" formControlName="dateEtablissement"/>
                                                                            <button type="button" class="btn btn-secondary" (click)="dateEtablissementDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Lieu Etablissement </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Lieu Etablissement" required
                                                                               formControlName="lieuEtablissement"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-3 col-form-label"> Autorite Emettrice </label>
                                                                    <div class="col-sm-9">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                               type="text" placeholder="Autorite Emettrice" required
                                                                               formControlName="autoriteEmettrice"/>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <button nbButton nbStepperPrevious (click)="vidmarq();videNip()" outline shape="round" status="basic">
                                                            <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                        </button>
                                                    </nb-step>
                                                </nb-stepper>
                                            </nb-card-body>
                                            <nb-card-footer>
                                                <button type="button" (click)="previousState()"
                                                        nbButton status="control" shape="round" >
                                                    <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span >Annuler</span>
                                                </button>
                                                <button type="submit" [disabled]="isSaving"
                                                        nbButton status="primary" shape="round" >
                                                    <fa-icon [icon]="'save'"></fa-icon>&nbsp;<span>Enregistrer</span>
                                                </button>
                                            </nb-card-footer>
                                        </nb-card>
                                    </form>
                                </nb-tab>
                                <nb-tab tabTitle="A Personne morale">
                                    <form name="editForm1" role="form" novalidate (ngSubmit)="save1()" [formGroup]="editForm1">
                                        <nb-card>
                                            <nb-card-header>
                                                <h2> Vente à une personne Morale </h2>
                                            </nb-card-header>
                                            <nb-card-body>
                                                <nb-stepper orientation="horizontal">
                                                    <nb-step>
                                                        <div>
                                                            <jhi-alert-error></jhi-alert-error>
                                                            <div class="form-group" [hidden]="!editForm1.get('id').value">
                                                                <label>ID</label>
                                                                <input type="text" class="form-control" name="id1" formControlName="id"
                                                                       readonly />
                                                                <span class="floating-label">Telephone</span>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Marque Engin</label>
                                                                <div class="col-sm-8">
                                                                    <nb-form-field>
                                                                        <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
                                                                        <input [nbAutocomplete]="auto" type="text" fieldSize="tiny" formControlName="marqueVehiculeId" required
                                                                               #autoInput (input)="onChange()" (click)="clic1()" nbInput status="primary" fullWidth placeholder="Rechercher une marque"/>
                                                                    </nb-form-field>
                                                                    <nb-autocomplete #auto [handleDisplayFn]="viewHandle" (selectedChange)="onSelectionChange1($event)">
                                                                        <nb-option  *ngFor="let option of filteredOptions$ | async" [value]="option.libelle">
                                                                            {{ option.libelle }}
                                                                        </nb-option>
                                                                    </nb-autocomplete>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <button nbButton nbStepperNext status="primary" shape="round" (click)="getmarque1()" >Suivant</button>
                                                        </div>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label">Selectionner le vehicule</label>
                                                            <div class="col-sm-8">
                                                                <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="vehiculeStock">
                                                                    <nb-option [value]="vehiculesOption" *ngFor="let vehiculesOption of vehicule1; trackBy: trackById">
                                                                        N Chassis: {{vehiculesOption.numeroChassis}} ---Model: {{vehiculesOption.model}}. ---Couleur: {{vehiculesOption.couleur}}
                                                                    </nb-option>
                                                                </nb-select>
                                                            </div>
                                                        </div>
                                                        <div><br>
                                                            <button nbButton nbStepperPrevious status="primary" (click)="vidmarq1()" shape="round">PRECEDANT</button>
                                                            <button nbButton nbStepperNext status="primary" shape="round" >Suivant</button>
                                                        </div>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label"> Numéro IFU </label>
                                                            <div class="col-sm-8">
                                                                <input name="numeroIFU" nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                       type="text" placeholder="Numéro IFU"
                                                                       formControlName="numeroIFU"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <button nbButton nbStepperPrevious (click)="vidmarq()" outline shape="round" status="basic">
                                                                <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                            </button>
                                                            <label class="col-sm-10 col-form-label" ></label>
                                                            <button nbButton nbStepperNext outline shape="round" (click)="verifIFU()" status="primary">
                                                                <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                            </button>
                                                        </div>
                                                    </nb-step>
                                                    <nb-step>
                                                        <div *ngIf="exist1; else pasHstIfu">
                                                            <div>
                                                                <p style="background: #db8b00">Ce numero NIP existe! Voici les details en déssous, s'il s'agit du même document continuez;
                                                                    dans le cas contraire reculer pour rectifier le NIP.</p>
                                                                <div class="container">
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero IFU :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.numeroIFU}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Numero RCCM :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.numeroRCCM}}
                                                                        </div>
                                                                    </div>
                                                                    <!--<div class="row">
                                                                        <div class="col-sm">
                                                                            Dénomination :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{organisation[0].nom}}
                                                                        </div>
                                                                    </div>-->
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Siege Social :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.siegeSocial}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Phone :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.telephone}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Email:
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.email}}
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm">
                                                                            Code Postal :
                                                                        </div>
                                                                        <div class="col-sm">
                                                                            {{docexist1.body.codePostal}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <ng-template #pasHstIfu>
                                                            <div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-4 col-form-label">Denomination</label>
                                                                    <div class="col-sm-8">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                               type="text" placeholder="Denomination"
                                                                               formControlName="denomination"/>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label  class="col-sm-4 col-form-label">Pays</label>
                                                                    <div class="col-sm-8">
                                                                        <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="nation">
                                                                            <nb-option [value]="nation" *ngFor="let nation of listnation;  trackBy: trackById">
                                                                                {{nation.name}} --- Code => {{nation.phonecode}}
                                                                            </nb-option>
                                                                        </nb-select>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-4 col-form-label">Date Création</label>
                                                                    <div class="col-sm-8">
                                                                    <span class="input-group-append">
                                                                        <input nbInput fullWidth shape="round" fieldSize="small" placeholder="Date Creation" type="text" class="inputText"
                                                                               ngbDatepicker  #dateNaissanceDp="ngbDatepicker" formControlName="dateCreate"/>
                                                                        <button type="button" class="btn btn-secondary" (click)="dateNaissanceDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                                    </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group row">
                                                                    <label class="col-sm-4 col-form-label">Numéro RCCM</label>
                                                                    <div class="col-sm-8">
                                                                        <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                               type="text" placeholder="Numero RCCM"
                                                                               formControlName="numeroRCCM" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </ng-template>
                                                        <button nbButton nbStepperPrevious (click)="vidmarq();videIFU()" outline shape="round" status="basic">
                                                            <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                        </button>
                                                    </nb-step>
                                                </nb-stepper>
                                            </nb-card-body>
                                            <nb-card-footer>
                                                <button type="button" id="cancel-save1" (click)="previousState()"
                                                        nbButton status="control" shape="round" >
                                                    <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span >Annuler</span>
                                                </button>
                                                <button type="submit" id="save-entity1" [disabled]="isSaving"
                                                        nbButton status="primary" shape="round">
                                                    <fa-icon [icon]="'save'"></fa-icon>&nbsp;<span>Enregistrer</span>
                                                </button>
                                            </nb-card-footer>
                                        </nb-card>
                                    </form>
                                </nb-tab>
                            </nb-tabset>
                        </div>
                    </nb-card>
                </nb-card-body>
                <div *jhiHasAnyAuthority="'STHGUICHET'">
                    <nb-tabset fullWidth>
                        <nb-tab tabTitle="Pour Personne physique">
                            <form name="editForm" role="form" novalidate (ngSubmit)="save()" [formGroup]="editForm">
                                <nb-card>
                                    <nb-card-body>
                                        <nb-stepper orientation="horizontal">
                                            <nb-step>
                                                <div class="form-group" [hidden]="!editForm.get('id').value">
                                                    <label >ID</label>
                                                    <input type="text" class="form-control" name="id" formControlName="id"
                                                           readonly />
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-4 col-form-label"> Numéro de Chassis </label>
                                                    <div class="col-sm-8">
                                                        <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                               type="text" placeholder="Numéro de Chassis"
                                                               formControlName="numeroChassis"/>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-11 col-form-label" ></label>
                                                    <button nbButton nbStepperNext outline shape="round" status="primary" (click)="verifChassis()">
                                                        <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                    </button>
                                                </div>
                                            </nb-step>
                                            <nb-step>
                                                <div *ngIf="vexist; else pasVexist">
                                                    <div>
                                                        <p style="background: #db8b00">Ce numero Cahssis existe! Voici les details en déssous;
                                                            reculez pour verifier le numero Chassis.</p>
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Numero Chassis :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist.body.numeroChassis}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Etat :
                                                                </div>
                                                                <div class="col-sm">
                                                                    <div *ngIf="vehiexist.body.venteId; else novendu">
                                                                        Vendu
                                                                    </div>
                                                                    <ng-template #novendu>
                                                                        Pas Vendu
                                                                    </ng-template>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Couleur :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist.body.couleur}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Model :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist.body.model}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Energie :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist.body.energie}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Genre :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist.body.types}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <button nbButton nbStepperPrevious (click)="vidChassis()" outline shape="round" status="basic">
                                                            <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                        </button>
                                                    </div>
                                                </div>
                                                <ng-template #pasVexist>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Selectionner le Type</label>
                                                                <div class="col-sm-8">
                                                                    <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="typeVehiculeId">
                                                                        <nb-option [value]="typevehiculesOption.id" *ngFor="let typevehiculesOption of typevehicules;  trackBy: trackById">
                                                                            {{typevehiculesOption.libelle}}
                                                                        </nb-option>
                                                                    </nb-select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Marque Engin</label>
                                                                <div class="col-sm-8">
                                                                    <nb-form-field>
                                                                        <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
                                                                        <input [nbAutocomplete]="auto" type="text" fieldSize="tiny" formControlName="marqueVehiculeId" required
                                                                               #autoInput (input)="onChange()" (click)="clic()" nbInput status="primary" fullWidth placeholder="Rechercher une marque"/>
                                                                    </nb-form-field>
                                                                    <nb-autocomplete #auto [handleDisplayFn]="viewHandle" (selectedChange)="onSelectionChange($event)">
                                                                        <nb-option  *ngFor="let option of filteredOptions$ | async" [value]="option.libelle">
                                                                            {{ option.libelle }}
                                                                        </nb-option>
                                                                    </nb-autocomplete>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Genre/Regime du vehicule</label>
                                                                <div class="col-sm-8">
                                                                    <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="genre">
                                                                        <nb-option [value]="genreOption" *ngFor="let genreOption of genre;  trackBy: trackById">
                                                                            {{genreOption}}
                                                                        </nb-option>
                                                                    </nb-select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Carrosserie du vehicule</label>
                                                                <div class="col-sm-8">
                                                                    <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="carrosserie">
                                                                        <nb-option [value]="carrosserieOption" *ngFor="let carrosserieOption of carrosserie;  trackBy: trackById">
                                                                            {{carrosserieOption}}
                                                                        </nb-option>
                                                                    </nb-select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Montant Engin </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="number" placeholder="Prix de l'Engin"
                                                                           formControlName="montant"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Modèle </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="text" placeholder="Modèle"
                                                                           formControlName="model"/>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Energie </label>
                                                                <div class="col-sm-8">
                                                                    <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="energie">
                                                                        <nb-option [value]="energieOption" *ngFor="let energieOption of energies;  trackBy: trackById">
                                                                            {{energieOption}}
                                                                        </nb-option>
                                                                    </nb-select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Nombre de Place </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="number" placeholder="Nombre de Place"
                                                                           formControlName="place"/>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Poids à vide </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="number" placeholder="Poids à vide"
                                                                           formControlName="poids"/>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Charge Utile </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="number" placeholder="Charge Utile"
                                                                           formControlName="chargeUtile"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-sm-10 col-form-label" ></label>
                                                        <button nbButton nbStepperNext outline shape="round" status="primary">
                                                            <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                        </button>
                                                    </div>
                                                </ng-template>
                                            </nb-step>
                                            <nb-step>
                                                <div>
                                                    <div class="form-group row">
                                                        <label class="col-sm-3 col-form-label"> NIP/No Identifiant </label>
                                                        <div class="col-sm-9">
                                                            <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                   type="text" placeholder="NIP/No Identifiant" required
                                                                   formControlName="nip" minlength="8" maxlength="14"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button nbButton nbStepperPrevious (click)="vidmarq()" outline shape="round" status="basic">
                                                    <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                </button>
                                                <button nbButton nbStepperNext outline shape="round" status="primary" (click)="verifNip()">
                                                    <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                </button>
                                            </nb-step>
                                            <nb-step>
                                                <div *ngIf="exist; else pasHstNip">
                                                    <div>
                                                        <p style="background: #db8b00">Ce numero NIP existe! Voici les details en déssous, s'il s'agit du même document continuez;
                                                            dans le cas contraire reculer pour rectifier le NIP.</p>
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Numero NIP :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist.body.nip}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Numero Document :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist.body.numeroDoc}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Type Document :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist.body.typeDocIdentification}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Date établissement :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist.body.dateEtablissement}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Authorité émettrice :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist.body.autoriteEmettrice}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Lieu établissement :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist.body.lieuEtablissement}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <ng-template #pasHstNip>
                                                    <div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Nom </label>
                                                            <div class="col-sm-9">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                       type="text" placeholder="Nom" required
                                                                       formControlName="nom"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Prenom </label>
                                                            <div class="col-sm-9">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                       type="text" placeholder="Prenom" required
                                                                       formControlName="prenom"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Date Naissance </label>
                                                            <div class="col-sm-9">
                                                            <span class="input-group-append">
                                                                <input nbInput fullWidth shape="round" fieldSize="small" placeholder="Date Naissance" type="text" class="inputText" name="dateNaissance"
                                                                       ngbDatepicker  #dateNaissanceDp="ngbDatepicker" formControlName="dateNaissance"/>
                                                                <button type="button" class="btn btn-secondary" (click)="dateNaissanceDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                            </span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Lieu Naissance </label>
                                                            <div class="col-sm-9">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                       type="text" placeholder="Lieu Naissance" required
                                                                       formControlName="lieuNaissance"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Telephone </label>
                                                            <div class="col-sm-9">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                       type="text" placeholder="Telephone" required
                                                                       formControlName="telephone"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Residence </label>
                                                            <div class="col-sm-9">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                       type="text" placeholder="Residence" required
                                                                       formControlName="residence"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label" >Type Doc Identification</label>
                                                            <div class="col-sm-9">
                                                                <nb-select status="primary" shape="round" fullWidth outline size="small" formControlName="typeDocIdentification">
                                                                    <nb-option value="CNIB">{{'improApp.TypeDocIdentification.CNIB' | translate}}</nb-option>
                                                                    <nb-option value="PASSEPORT">{{'improApp.TypeDocIdentification.PASSEPORT' | translate}}</nb-option>
                                                                    <nb-option value="CARTE_MILITAIRE">{{'improApp.TypeDocIdentification.CARTE_MILITAIRE' | translate}}</nb-option>
                                                                    <nb-option value="CARTE_SCOLAIRE">{{'improApp.TypeDocIdentification.CARTE_SCOLAIRE' | translate}}</nb-option>
                                                                    <nb-option value="CARTE_ID_ETRANGERE">{{'improApp.TypeDocIdentification.CARTE_ID_ETRANGERE' | translate}}</nb-option>
                                                                </nb-select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label  class="col-sm-3 col-form-label">Pays</label>
                                                            <div class="col-sm-9">
                                                                <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="nation">
                                                                    <nb-option [value]="nation" *ngFor="let nation of listnation;  trackBy: trackById">
                                                                        {{nation.name}} --- Code => {{nation.phonecode}}
                                                                    </nb-option>
                                                                </nb-select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Numero Document </label>
                                                            <div class="col-sm-9">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                       type="text" placeholder="Numero Document" required
                                                                       formControlName="numeroDoc"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Date Etablissement </label>
                                                            <div class="col-sm-9">
                                                            <span class="input-group-append">
                                                                <input nbInput fullWidth shape="round" status="primary"
                                                                       placeholder="Date Etablissement" type="text" class="inputText" name="dateEtablissement"
                                                                       ngbDatepicker  #dateEtablissementDp="ngbDatepicker" formControlName="dateEtablissement"/>
                                                                <button type="button" class="btn btn-secondary" (click)="dateEtablissementDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                            </span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Lieu Etablissement </label>
                                                            <div class="col-sm-9">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                       type="text" placeholder="Lieu Etablissement" required
                                                                       formControlName="lieuEtablissement"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-3 col-form-label"> Autorite Emettrice </label>
                                                            <div class="col-sm-9">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="round" status="primary"
                                                                       type="text" placeholder="Autorite Emettrice" required
                                                                       formControlName="autoriteEmettrice"/>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                                <button nbButton nbStepperPrevious (click)="vidmarq();videNip()" outline shape="round" status="basic">
                                                    <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                </button>
                                            </nb-step>
                                        </nb-stepper>
                                    </nb-card-body>
                                    <nb-card-footer>
                                        <button type="button"  (click)="previousState()"
                                                nbButton status="basic" outline shape="round" >
                                            <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span >Annuler</span>
                                        </button>
                                        <button type="submit" [disabled]="isSaving"
                                                nbButton status="primary" outline shape="round" >
                                            <fa-icon [icon]="'save'"></fa-icon>&nbsp;<span>Enregistrer</span>
                                        </button>
                                    </nb-card-footer>
                                </nb-card>
                            </form>
                        </nb-tab>
                        <nb-tab tabTitle="Pour Personne morale">
                            <form name="editForm1" role="form" novalidate (ngSubmit)="save1()" [formGroup]="editForm1">
                                <nb-card>
                                    <nb-card-body>
                                        <nb-stepper orientation="horizontal">
                                            <nb-step>
                                                <div class="form-group" [hidden]="!editForm1.get('id').value">
                                                    <label >ID</label>
                                                    <input type="text" class="form-control" name="id" formControlName="id"
                                                           readonly />
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-4 col-form-label"> Numéro de Chassis </label>
                                                    <div class="col-sm-8">
                                                        <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                               type="text" placeholder="Numéro de Chassis"
                                                               formControlName="numeroChassis"/>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-11 col-form-label" ></label>
                                                    <button nbButton nbStepperNext outline shape="round" status="primary" (click)="verifChassis1()">
                                                        <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                    </button>
                                                </div>
                                            </nb-step>
                                            <nb-step>
                                                <div *ngIf="vexist1; else pasVexist1">
                                                    <div>
                                                        <p style="background: #db8b00">Ce numero Cahssis existe! Voici les details en déssous;
                                                            reculez pour verifier le numero Chassis.</p>
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Numero Chassis :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist1.body.numeroChassis}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Etat :
                                                                </div>
                                                                <div class="col-sm">
                                                                    <div *ngIf="vehiexist1.body.venteId; else novendu1">
                                                                        Vendu
                                                                    </div>
                                                                    <ng-template #novendu1>
                                                                        Pas Vendu
                                                                    </ng-template>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Couleur :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist1.body.couleur}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Model :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist1.body.model}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Energie :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist1.body.energie}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Genre :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{vehiexist1.body.types}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <button nbButton nbStepperPrevious (click)="vidChassis1()" outline shape="round" status="basic">
                                                            <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                        </button>
                                                    </div>
                                                </div>
                                                <ng-template #pasVexist1>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Selectionner le Type</label>
                                                                <div class="col-sm-8">
                                                                    <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="typeVehiculeId">
                                                                        <nb-option [value]="typevehiculesOption.id" *ngFor="let typevehiculesOption of typevehicules;  trackBy: trackById">
                                                                            Type  => {{typevehiculesOption.libelle}}
                                                                        </nb-option>
                                                                    </nb-select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Marque Engin</label>
                                                                <div class="col-sm-8">
                                                                    <nb-form-field>
                                                                        <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
                                                                        <input [nbAutocomplete]="auto" type="text" fieldSize="tiny" formControlName="marqueVehiculeId" required
                                                                               #autoInput (input)="onChange()" (click)="clic1()" nbInput status="primary" fullWidth placeholder="Rechercher une marque"/>
                                                                    </nb-form-field>
                                                                    <nb-autocomplete #auto [handleDisplayFn]="viewHandle" (selectedChange)="onSelectionChange1($event)">
                                                                        <nb-option  *ngFor="let option of filteredOptions$ | async" [value]="option.libelle">
                                                                            {{ option.libelle }}
                                                                        </nb-option>
                                                                    </nb-autocomplete>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Genre/Regime du vehicule</label>
                                                                <div class="col-sm-8">
                                                                    <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="genre">
                                                                        <nb-option [value]="genreOption" *ngFor="let genreOption of genre;  trackBy: trackById">
                                                                            {{genreOption}}
                                                                        </nb-option>
                                                                    </nb-select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label">Carrosserie du vehicule</label>
                                                                <div class="col-sm-8">
                                                                    <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="carrosserie">
                                                                        <nb-option [value]="carrosserieOption" *ngFor="let carrosserieOption of carrosserie;  trackBy: trackById">
                                                                            {{carrosserieOption}}
                                                                        </nb-option>
                                                                    </nb-select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Montant Engin </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="number" placeholder="Prix de l'Engin"
                                                                           formControlName="montant"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Modèle </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="text" placeholder="Modèle"
                                                                           formControlName="model"/>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Energie </label>
                                                                <div class="col-sm-8">
                                                                    <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="energie">
                                                                        <nb-option [value]="energieOption" *ngFor="let energieOption of energies;  trackBy: trackById">
                                                                            {{energieOption}}
                                                                        </nb-option>
                                                                    </nb-select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Nombre de Place </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="number" placeholder="Nombre de Place"
                                                                           formControlName="place"/>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Poids à vide </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="number" placeholder="Poids à vide"
                                                                           formControlName="poids"/>
                                                                </div>
                                                            </div>
                                                            <div class="form-group row">
                                                                <label class="col-sm-4 col-form-label"> Charge Utile </label>
                                                                <div class="col-sm-8">
                                                                    <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                           type="number" placeholder="Charge Utile"
                                                                           formControlName="chargeUtile"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group row">
                                                        <label class="col-sm-10 col-form-label" ></label>
                                                        <button nbButton nbStepperNext outline shape="round" status="primary">
                                                            <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                        </button>
                                                    </div>
                                                </ng-template>
                                            </nb-step>
                                            <nb-step>
                                                <div class="form-group row">
                                                    <label class="col-sm-4 col-form-label"> Numéro IFU </label>
                                                    <div class="col-sm-8">
                                                        <input name="numeroIFU" nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                               type="text" placeholder="Numéro IFU"
                                                               formControlName="numeroIFU"/>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <button nbButton nbStepperPrevious (click)="vidmarq()" outline shape="round" status="basic">
                                                        <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                    </button>
                                                    <label class="col-sm-10 col-form-label" ></label>
                                                    <button nbButton nbStepperNext outline shape="round" (click)="verifIFU()" status="primary">
                                                        <nb-icon icon="arrow-forward-outline" size="120"></nb-icon>
                                                    </button>
                                                </div>
                                            </nb-step>
                                            <nb-step>
                                                <div *ngIf="exist1; else pasHstIfu">
                                                    <div>
                                                        <p style="background: #db8b00">Ce numero NIP existe! Voici les details en déssous, s'il s'agit du même document continuez;
                                                            dans le cas contraire reculer pour rectifier le NIP.</p>
                                                        <div class="container">
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Numero IFU :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist1.body.numeroIFU}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Numero RCCM :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist1.body.numeroRCCM}}
                                                                </div>
                                                            </div>
                                                            <!--<div class="row">
                                                                <div class="col-sm">
                                                                    Dénomination :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist1.body}}
                                                                </div>
                                                            </div>-->
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Siege Social :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist1.body.siegeSocial}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Phone :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist1.body.telephone}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Email:
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist1.body.email}}
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-sm">
                                                                    Code Postal :
                                                                </div>
                                                                <div class="col-sm">
                                                                    {{docexist1.body.codePostal}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <ng-template #pasHstIfu>
                                                    <div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label">Denomination</label>
                                                            <div class="col-sm-8">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                       type="text" placeholder="Denomination"
                                                                       formControlName="denomination"/>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label  class="col-sm-3 col-form-label">Pays</label>
                                                            <div class="col-sm-8">
                                                                <nb-select outline shape="semi-round" status="primary" fullWidth size="small" formControlName="nation">
                                                                    <nb-option [value]="nation" *ngFor="let nation of listnation;  trackBy: trackById">
                                                                        {{nation.name}} --- Code => {{nation.phonecode}}
                                                                    </nb-option>
                                                                </nb-select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label">Date Création</label>
                                                            <div class="col-sm-8">
                                                                    <span class="input-group-append">
                                                                        <input nbInput fullWidth shape="round" fieldSize="small" placeholder="Date Creation" type="text" class="inputText"
                                                                               ngbDatepicker  #dateNaissanceDp="ngbDatepicker" formControlName="dateCreate"/>
                                                                        <button type="button" class="btn btn-secondary" (click)="dateNaissanceDp.toggle()"><fa-icon [icon]="'calendar-alt'"></fa-icon></button>
                                                                    </span>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-4 col-form-label">Numéro RCCM</label>
                                                            <div class="col-sm-8">
                                                                <input nbInput fullWidth fieldSize="tiny" shape="semi-round" status="primary"
                                                                       type="text" placeholder="Numero RCCM"
                                                                       formControlName="numeroRCCM" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                                <button nbButton nbStepperPrevious (click)="vidmarq();videIFU()" outline shape="round" status="basic">
                                                    <nb-icon icon="arrow-back-outline" size="120"></nb-icon>
                                                </button>
                                            </nb-step>
                                        </nb-stepper>
                                    </nb-card-body>
                                    <nb-card-footer>
                                        <button type="button" (click)="previousState()"
                                                nbButton status="basic" outline shape="round" >
                                            <fa-icon [icon]="'ban'"></fa-icon>&nbsp;<span >Annuler</span>
                                        </button>
                                        <button type="submit" [disabled]="isSaving"
                                                nbButton status="primary" outline shape="round" >
                                            <fa-icon [icon]="'save'"></fa-icon>&nbsp;<span>Enregistrer</span>
                                        </button>
                                    </nb-card-footer>
                                </nb-card>
                            </form>
                        </nb-tab>
                    </nb-tabset>
                </div>
            </nb-card>
        </div>
</div>
